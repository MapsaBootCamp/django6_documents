Command Design Pattern
====================
**Author:AliAzamian**

<div dir=”rtl”>

دیزاین پترن دستور (command)  یک دیزاین پترن رفتاری است که یک درخواست را به یک شی مستقل تبدیل می کند که شامل تمام اطلاعات مربوط به آن درخواست است . این عملیات به شما اجازه می دهد
که تمام درخواست ها را به عنوان آرگومان های این شی ارسال کنید .
	
 چالش ها:confused:

فرض کنید شما در حال طراحی یک برنامه کار با متن هستید و میخواهید دکمه هایی به نوار های آن اضافه کنید . شما یک کلاس اصلی برای دکمه خود ایجاد می کنید و انتظار دارید که با ارث بری از این کلاس تمام دکمه های خود را ایجاد کنید در ابتدای کار به نظر خیلی ایده عالی به نظر میرسد ولی پس از گذشت مدتی به این نتیجه می رسید که با ایجاد کوچک ترین تغییری در کلاس اصلی دکمه خود ممکن باعث خراب شدن تمامی زیر کلاس های آن شوید حتی اگر این مرحله را به خوبی پشت سر بگذارید در مراحل بعدی اگر در مکان دیگری نیاز به استفاده از آن عملیات را داشتید مثلا (copy) کردن یک متن اگر کسی بخواهد با دکمه ان این کار را انجام دهد کاملا کارا است ولی وقتی که میخواهیم قسمت shortcut key ها را طراحی کنیم نیاز به طراحی دوباره تمام کلاس copy هستیم . 

راه حل  :smiley:

در حالت کلی یک طراحی خوب و درست برنامه باید اصل  ***principle of separation of concerns***
را رعایت کند که به معنی پایبند بودن به اصول جداسازی در لایه ها است که مثال اساسی آن جدا بودن لایه 
. ان از لایه بک اند آن است Front  
در این مثال نیز ما باید در لایه فرانت کلید های مختلف خود را به کاربر نشان دهیم و منتظر انتخاب کاربر و فرستادن ان برای لایه بک اند است ولی این فرایند باید با استفاده یک کلاس دیگر انجام شود تا فقط اطلاعات لازم برای لایه بک اند ارسال شود و به صورت مستقیم با هم در ارتباط نباشند .
مانند شکل زیر :
![This is an image](https://refactoring.guru/images/patterns/diagrams/command/solution2-en.png)

 گام بعدی این است که دستورات خود را وادار کنید که همان رابط را اجرا کنند. معمولاً فقط یک روش اجرا دارد که هیچ پارامتری نمی گیرد. این رابط به شما امکان می دهد از دستورات مختلف با همان فرستنده درخواست استفاده کنید، بدون اینکه آن را به کلاس های مشخصی از دستورات متصل کنید. به عنوان یک امتیاز، اکنون می توانید اشیاء دستوری مرتبط با فرستنده را تغییر دهید و به طور موثر رفتار فرستنده را در زمان اجرا تغییر دهید.(abstract )

بیایید به ویرایشگر متن خود برگردیم. پس از اعمال الگوی Command، دیگر برای اجرای رفتارهای کلیکی مختلف به همه آن زیر کلاس‌های دکمه نیاز نداریم. کافی است یک فیلد را در کلاس اصلی Button قرار دهید که ارجاع به یک شیء فرمان را ذخیره می کند و دکمه را وادار به اجرای آن فرمان با یک کلیک کنید.

شما یک دسته از کلاس های فرمان را برای هر عملیات ممکن پیاده سازی خواهید کرد و بسته به رفتار مورد نظر دکمه ها، آنها را با دکمه های خاص مرتبط خواهید کرد.

در شکل پایین uml ان را میبینیم : 



![This is an image](https://refactoring.guru/images/patterns/diagrams/command/structure.png)

مثال آن در زندگی واقعی مثل موقعی هست که شما به رستوران می روید و گارسون سفارش شما را جایی یادداشت می کند و به سرآشپز میدهد وقتی سر آشپز آن را می بیند می تواند به راحتی آن را بپزد و نیازی نیست که به پیش شما بیاید و از شما بپرسد چه کاری انجام دهد و جواب به راحتی به دست شما می رسد .

و در این uml ما نقش client  را داریم گارسون (رابط) نقش کلاس command  را دارد و سر آشپز یا همان سرور اصلی نقش invoker را دارند.




</div>
